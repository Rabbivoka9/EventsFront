<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EventsOdi</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.2.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="css/style.css">
    <script src="https://davidshimjs.github.io/qrcodejs/qrcode.min.js"></script>

    

</head>

<body>
    <header class="header">
        <a href="#" class="logo"><img class="logo" src="images/LOGO PNG OK 2 1.png" /></a>
        <nav class="navbar">
            <a href="#home" class="hover-underline">home</a>
            <a href="#about" class="hover-underline">Créer un Evenement</a>
            <a href="#contact" class="hover-underline">contact</a>
        </nav>
        <div class="icons">
            <div class="cont-u">
                <div class="fas fa-user" id="login-btn"></div>
                <div class="user-display" id="userDisplayName"></div>
            </div>
            <div class="fas fa-bars" id="menu-btn"></div>
        </div>

          <form action="" class="login-form">
            <h3>Se connecter a votre compte</h3>
            <a href="connexion.html" class="btn">
                <span class="text text-2" aria-hidden="true">Connexion</span>
                <span class="text text-1">Connexion</span>
                
            </a>
        </form> 
    </header>

    <section class="home2" id="home">
        <div class="content">
            <h3 class="biv">Bienvenue sur la Plaforme qui vous permet de rendre unique vos Evenements</h3>
            <a href="#" class="btn1">
                <span class="text text-1">Contact</span>
                
            </a>
        </div>
    </section>

    <section class="about" id="about">
        <h1 class="heading">Créer Votre Evenement</h1>
        <img class="li" src="images/separator.png" alt="">
        <section class="CreatEve">
            <div class="row">
                <form id="createEventForm" action="">
                    <h3>Inserer vos informations</h3>
                    <input name="idUser" type="hidden" placeholder="Nom de l'utilisateur" value="" class="box">
                    <label>Titre de l'Evenement</label>
                    <input name="titreevenent" type="text" placeholder="Titre de l'Evenement" class="box">
                    <label>Image de Fond</label>
                    <input name="photofond" type="file" placeholder="Photo de Fond" class="box">
                    <label>Titre Generale</label>
                    <input name="titregeneral" type="text" placeholder="Titre Generale" class="box">
                    <label>Titre Description</label>
                    <input name="titredescription" type="text" placeholder="Titre Description" class="box">
                    <label>Description</label>
                    <textarea name="description" placeholder="Description" cols="30" rows="10" class="box"></textarea>
                    <label>Image de Profil</label>
                    <input name="imageprofil" type="file" placeholder="Titre Description" class="box">
                    <label>Programme</label>
                    <input name="titre1" type="text" placeholder="Titre1" class="box">
                    <input name="titre2" type="text" placeholder="Titre2" class="box">

                    <a href="#" id="createEventBtn" class="btn">
                        <span class="text text-1">Créer</span>
                        
                    </a>
                    <a href="Client.html" class="btn">
                        <span class="text text-1">Apperçu</span>
                      
                    </a>
                </form>

                <div class="container">
                    <h4>Enregisterer Les Participants</h4>
                    <form action="#"  id="CreateInviteForm">
                            <input class="op1"  type="text" placeholder="Nom" id="nom" name="nom">
                            
                            <input class="op" type="text" placeholder="Table ou Siege" id="table" name="table">
                            <a  id="createInviteBtn" class="btn">
                                <span class="text text-1">Enregisterer</span>
                               
                            </a>
                    </form>
                </div>
            </div>
            <div class="mod">
                <header class="header1">

                    <h5 id="titreevenent">Mariage Megane </h5>
            
                    <nav class="navbar1">
                        <a href="#home1" class="hover-underline">home</a>
                        <a href="#about1" class="hover-underline">Invitation</a>
                        <a href="#contact1" class="hover-underline">Programme</a>
                    </nav>
            
                    <div class="icons">
                        <div class="fas fa-bars" id="menu-btn"></div>
                    </div>
            
                </header>
                <section  class="home1" id="home1 ">
                    <div class="dd">
                        <h3 id="titregeneral">Heureux Mariage Handy & Maclckean</h3>
                        
                    </div>
                </section>
                <section class="about1" id="about1">
                    <div class="dis1">
                     <img id="imageprofil" class="profil1" src="images/couple.jpg" alt="">
         
                     <div class="descriptiontitre1">
                         <h2 id="titredescription">Invitation</h2>
                        <p id="description" class="description">
                         chers amis et famille,
         
                         C'est avec une joie infinie que nous vous invitons à célébrer un moment magique dans nos vies. Le [date du mariage], nous unirons nos cœurs et nos âmes lors de notre mariage tant attendu.
                         
                         L'amour que nous partageons a grandi et évolué au fil des années, et il est temps de sceller notre destinée ensemble, entourés de ceux qui nous sont chers. Votre présence à cet événement si spécial sera le plus précieux des cadeaux.</p>
                     </div>
                 </div>
             </section>
             <section class="footer1" id="contact1">

                <h1 class="heading1">Programme</h1>
                <img class="li1" src="images/separator.png" alt="">
                <div class="box-container">
                    <div class="box">
                        <h3 id="titre1">Vendredi</h3>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                    </div>
                    <div class="box">
                        <h3 id="titre2">Samedi</h3>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                        <p>14h30': Celebration Nupcial a la Paroisse Saint Paul</p>
                        
                    </div>
                </div>
        
                <a href="#" id="popupButton" class="btn">
                    <span class="text text-1"aria-hidden="true">Confirmer Votre Place</span>
                   
                </a>

                <div id="myModal" class="modal">
                    <div class="modal-content">
                      <span class="close">&times;</span>
                      <div class="container-qr">
                        <input type="text" id="qr-input" placeholder="Entrez Votre Nom">
                        <div id="qr-code"></div>
                      </div>
                    
                    </div>
                  </div>


            </section>

            <section class="contact1">

                <div class="box-container">
        
                    <div class="box">
                        
                        <p class="power">Power by Vkm Design</p>
                        
                    </div>
                </div>
            </section>

            </div>
        </section>
    </section>

    <section class="contact" id="contact">
        <h1 class="heading">contact</h1>
        <img class="li" src="images/separator.png" alt="">
        <div class="row">
            <div class="image">
                <img src="images/phone.png" alt="">
            </div>
            <form action="">
                <h3>Ecrivez-Nous ici</h3>
                <input type="text" placeholder="nom" class="box">
                <input type="email" placeholder="email" class="box">
                <textarea placeholder="message" cols="30" rows="10" class="box"></textarea>
                <a href="#" class="btn">
                    <span class="text text-1">Envoie</span>
                    
                </a>
            </form>
        </div>
    </section>

    <section class="footer">
        <div class="box-container">
            <div class="box">
                <h3>Suivez-Nous ici</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Recusandae, ex.</p>
                <div class="share">
                    <a href="#" class="fab fa-telegram"></a>
                    <a href="#" class="fab fa-instagram"></a>
                    <a href="#" class="fab fa-github"></a>
                </div>
            </div>
            <div class="box">
                <h3>contact</h3>
                <p>+123-45-67</p>
                <a href="#" class="link">zipex98@gmail.com</a>
            </div>
            <div class="box">
                <h3>Notre Adresse</h3>
                <p>230 points of the pines <br> colorado springs <br> unites states</p>
            </div>
        </div>
        <div class="credit">| all rights are reserved!</div>
    </section>



    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
            const userId = localStorage.getItem('id');
            // Mettre la valeur de l'ID de l'utilisateur dans le champ d'entrée correspondant
            const userIdInput = document.querySelector('input[name="idUser"]');
            userIdInput.value = userId;

            console.log(userId)
        // Function to handle form submission
        function handleFormSubmit(event) {
            event.preventDefault();
            const form = document.getElementById("createEventForm");
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });
            // Make a POST request to your API using Axios
            console.log(data)
            console.log('okay')
            axios.post("http://localhost:3000/ReqEvent", data)
                .then((response) => {
                    const descriptionParagraph = document.getElementById("description");
                    descriptionParagraph.textContent = response.data.description;
                    const titreGeneral = document.getElementById("titregeneral");
                    titreGeneral.textContent = response.data.titregeneral;
                    const titreEv = document.getElementById("titreevenent");
                    titreEv.textContent = response.data.titreevenent;
                    const titreDes = document.getElementById("titredescription");
                    titreDes.textContent = response.data.titredescription;
                    const t1 = document.getElementById("titre1");
                    titre1.textContent = response.data.titre1;
                    const t2 = document.getElementById("titre2");
                    titre2.textContent = response.data.titre2;
                    
                    // Handle the API response here if needed
                    console.log("API Response:", response.data);
                    const queryString = encodeURIComponent(JSON.stringify(response.data));
                    // window.location.href = "user.html?response=" + queryString;
                })
                .catch((error) => {
                    console.error("Error:", error);
                });      
        }
        // Add click event listener to the "Créer" button
        const createButton = document.getElementById("createEventBtn");
        createButton.addEventListener("click", handleFormSubmit);

        // Fonction pour gérer la soumission du formulaire de connexion
        function handleLoginFormSubmit(event) {
    event.preventDefault();
    // Remplacez cette partie par votre logique de soumission de formulaire de connexion réelle
    // Par exemple, utilisez AJAX pour envoyer les informations de connexion au backend
    // et récupérez le nom d'utilisateur dans la réponse.

    // Supposons que vous ayez une API avec une route d'authentification "/login" qui renvoie le nom d'utilisateur.
    const loginData = {
        username: "votre_nom_d_utilisateur",
        password: "votre_mot_de_passe",
    };

    // Faites une requête POST à votre API pour effectuer l'authentification.
    axios.post("http://localhost:4000/ReqEvent", loginData)
        .then((response) => {
            // L'authentification a réussi, récupérez le nom d'utilisateur à partir de la réponse de l'API.
            const username = response.data.username;

            // Mettez à jour l'élément userDisplayName avec le nom d'utilisateur
            const userDisplayNameElement = document.getElementById("userDisplayName");
            userDisplayNameElement.textContent = username;
        })
        .catch((error) => {
            console.error("Error:", error);
            // Gérer les erreurs d'authentification ici.
        });
}

    </script>

    <script>
        const popupButton = document.getElementById('popupButton');
        const modal = document.getElementById('myModal');
        const closeBtn = document.getElementsByClassName('close')[0];

        popupButton.addEventListener('click', () => {
        modal.style.display = 'block';
        });

        closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
        });

        window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
        }
        });
    </script>

<script>
    const input = document.getElementById('qr-input');
    const qrCodeDiv = document.getElementById('qr-code');
    const qrCode = new QRCode(qrCodeDiv, {
        width: 200,
        height: 200
    });

    input.addEventListener('input', updateQRCode);

    function updateQRCode() {
        const text = input.value;
        qrCode.clear();
        qrCode.makeCode(text);
    }
</script>

<script>
    // Function to handle form submission
    function handleFormSubmit1(event) {
        event.preventDefault();
        const form = document.getElementById("CreateInviteForm");
        const formData = new FormData(form);
        const data = {};
        formData.forEach((value, key) => {
            data[key] = value;
        });
        // Make a POST request to your API using Axios
        axios.post("http://localhost:4000/ReqInvite", data)
            .then((response) => {
                // Handle the API response here if needed
                console.log("API Response:", response.data);
                const queryString = encodeURIComponent(JSON.stringify(response.data));
                // window.location.href = "index.html?response=" + queryString;
            })
            .catch((error) => {
                console.error("Error:", error);
            });
    }
    // Add click event listener to the "Créer" button
    const EnregistrButton = document.getElementById("createInviteBtn");
    createButton.addEventListener("click", handleFormSubmit);

   
</script>
<script>
    // Récupérer les informations de l'utilisateur depuis le localStorage
    const userData = localStorage.getItem("username");
  
    if (userData) {
        const loginForm = document.querySelector(".login-form");
      loginForm.innerHTML = `
        <h3>Se deconnecter</h3>
        <button class="btn" id="logoutBtn">
          <span class="text text-2" aria-hidden="true">Déconnexion</span>
          <span class="text text-1">Déconnexion</span>
        </button>
      `;
      const logoutBtn = document.getElementById("logoutBtn");
      logoutBtn.addEventListener("click", handleLogout);
      // Utiliser le nom d'utilisateur comme nécessaire dans votre application
      const userDisplayNameElement = document.getElementById("userDisplayName");
      userDisplayNameElement.textContent = userData; 
    } else {
      const userDisplayNameElement = document.getElementById("userDisplayName");
      userDisplayNameElement.textContent = ""; // Texte générique pour les utilisateurs non connectés.
    }
    function handleLogout(event) {
      event.preventDefault();
      // Supprimer les données utilisateur du localStorage
      localStorage.removeItem("username");
      localStorage.removeItem("id");

      window.location.href = "index.html";
    }
  </script>

</body>

</html>
